<%= form_for @changeset, @action, [class: "uk-form-stacked"], fn f -> %>
  <%= if @changeset.action do %>
    <div class="alert alert-danger">
      <p>Oops, something went wrong! Please check the errors below.</p>
    </div>
  <% end %>
  <div class="uk-margin">
    <%= label f, :kind, "Tipo",class: "uk-form-label" %>
    <div class="uk-form-controls">
      <%= select f, :kind, ["Pessoa Fisica": "individual", "Pessoa Juridica": "juridical" ], class: "uk-input" %>
    </div>
    <%= error_tag f, :kind %>
  </div>
  <div class="uk-margin">
    <%= label f, :activity_id, "Tipo",class: "uk-form-label" %>
    <div class="uk-form-controls">
      <%= select f, :activity_id, activities, class: "uk-input" %>
    </div>
    <%= error_tag f, :activity_id %>
  </div>
  <%= if @customer do %>
    <%= if @customer.kind == "juridical" do %>
      <div id="individual" class="isHidden">
    <% else %>
      <div id="individual">
    <% end %>
  <% else %>
    <div id="individual">
  <% end %>
    <div class="uk-margin">
      <%= label f, :cpf, "CPF",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :cpf, class: "uk-input" %>
      </div>
      <%= error_tag f, :cpf %>
    </div>
    <div class="uk-margin">
      <%= label f, :rg, "RG",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :rg, class: "uk-input" %>
      </div>
      <%= error_tag f, :rg %>
    </div>
  </div>

  <%= if @customer do %>
    <%= if @customer.kind == "individual" do %>
      <div id="juridical" class="isHidden">
    <% else %>
      <div id="juridical">
    <% end %>
  <% else %>
    <div id="juridical">
  <% end %>

    <div class="uk-margin">
      <%= label f, :reason_social, "Razão Social",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :reason_social, class: "uk-input" %>
      </div>
      <%= error_tag f, :reason_social %>
    </div>
    <div class="uk-margin">
      <%= label f, :fantasy_name, "Nome Fantasia",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :fantasy_name, class: "uk-input" %>
      </div>
      <%= error_tag f, :fantasy_name %>
    </div>
    <div class="uk-margin">
      <%= label f, :cnpj, "CNPJ",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :cnpj, class: "uk-input" %>
      </div>
      <%= error_tag f, :cnpj %>
    </div>
    <div class="uk-margin">
      <%= label f, :state_registration, "Incrição Estadual",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :state_registration, class: "uk-input" %>
      </div>
      <%= error_tag f, :state_registration %>
    </div>
    <div class="uk-margin">
      <%= label f, :municipal_registration, "Incrição Municipal",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input f, :municipal_registration, class: "uk-input" %>
      </div>
      <%= error_tag f, :municipal_registration %>
    </div>
  </div>

  <%= inputs_for f, :user, fn fp -> %>
    <div class="uk-margin">
      <%= label fp, :name, "Nome do Responsável",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input fp, :name, class: "uk-input" %>
      </div>
      <%= error_tag fp, :name %>
    </div>
    <div class="uk-margin">
      <%= label fp, :email, "Email do Responsável",class: "uk-form-label" %>
      <div class="uk-form-controls">
        <%= text_input fp, :email, class: "uk-input" %>
      </div>
      <%= error_tag fp, :email %>
    </div>
    <div class="uk-margin">
      <div class="uk-form-controls">
        <%= hidden_input fp, :password, value: "12345678", class: "uk-input" %>
      </div>
    </div>
  <% end %>
  <div>
    <span><%= link "Cancelar", to: Routes.customer_path(@conn, :index), class: "uk-button uk-button-danger" %></span>
    <%= submit "Salvar", class: "uk-button uk-button-primary" %>
  </div>
<% end %>
